---
title: linux磁盘空间排查
date: 2024-02-28
categories: linux
tags: [linux, 磁盘]
description: linux磁盘空间排查
---

要排查Linux系统中的磁盘空间使用情况，可以采取以下步骤：

1. **使用 `df` 命令查看磁盘空间使用情况：**
   ```
   df -h
   ```
   这个命令会显示文件系统的使用情况，包括已用空间、可用空间和挂载点等信息。使用 `-h` 选项可以以人类可读的方式显示容量大小。

2. **使用 `du` 命令查看目录占用空间：**
   ```
   du -h --max-depth=1 /path/to/directory
   ```
   这个命令会显示指定目录下各子目录和文件的大小。你可以替换 `/path/to/directory` 为你要检查的目录的路径。`--max-depth=1` 参数限制了只显示指定目录下的一级子目录和文件。

3. **使用 `ls` 命令查看文件大小：**
   ```
   ls -lh
   ```
   这个命令可以列出当前目录下文件的详细信息，包括文件大小。使用 `-lh` 参数可以以人类可读的方式显示文件大小。

4. **查找大文件：**
   ```
   find /path/to/search -type f -size +100M
   ```
   这个命令会在指定目录及其子目录中查找大于100MB的文件。你可以根据需要调整文件大小的限制。

5. **检查日志文件：**
   日志文件有时会占用大量磁盘空间。可以使用命令如下查看是否有较大的日志文件：
   ```
   du -h /var/log
   ```

6. **清理不需要的文件：**
   如果有不再需要的文件，可以手动删除或使用相应的命令进行清理。确保你不会删除系统关键文件。

7. **查看进程占用磁盘空间：**
   有时候，进程可能占用大量磁盘空间。可以使用命令如下查看进程占用磁盘空间的情况：
   ```
   lsof | grep deleted
   ```
   这将列出已删除但仍然被某些进程占用的文件。

8. **定期清理临时文件：**
   定期清理系统临时目录中的文件，可以使用以下命令：
   ```
   sudo find /tmp -type f -atime +7 -delete
   ```
   这会删除超过7天未被访问的临时文件。

记得在进行磁盘清理时小心，确保不会删除重要的文件。最好在清理之前备份重要数据。